# AGENTS.md

Notes for this repository:

- **Git commit hooks are DISABLED** (as of 2026-02-09) - git commit is now fast and doesn't run automatic checks
- **You MUST run `yarn test:fix` or `run-all-checks-fix.bat` before committing** to ensure code quality
- Line-ending warnings (LF to CRLF) are expected in this workspace; do not treat them as errors.
- If `git status` shows a file as modified but `git diff` is empty and the LF/CRLF warning appears, treat it as line-ending noise; do not loop trying to resolve it.
- **NEVER redirect stderr to `Nul` or `nul`** - these are Windows reserved device names; use `NUL` (all caps) instead to avoid creating phantom untracked files that git cannot remove.

## Git Remote Management (CRITICAL)

- **ALWAYS execute `git remote remove origin` at the start of any code changes session. However, if the command fails with "origin not found" or something similar, that means origin has already been removed. and that is fine. So dont bother fixing it beyond that. Move on**
- This prevents accidental pushes to the remote repository
- User will manually reset the remote (`git remote add origin <url>`) when ready to push
- Verify remote status with: `git remote -v` (an `origin.url` config value with no fetch/push remotes is OK)

## Code Change Guidelines

### Inline Comments

- **Always add explanatory comments** to non-trivial code changes
- Comments should include:
  - **Who**: Fixed by [Agent/Person Name] on [Date]
  - **What**: Brief description of what was changed
  - **Why**: Problem being solved or reason for change (if not obvious)
  - **How**: New approach or key implementation details
- Example format:
  ```typescript
  /* Fixed by Claude Sonnet 4.5 on 2026-02-08
     Problem: Link extended full width causing UX issues
     Solution: Changed to inline-flex to only wrap title text
     Result: Link cursor only appears over actual content */
  ```

### Changelog Summaries (CHANGE_COMMENTS.md)

- **Always add summaries** of significant changes to `CHANGE_COMMENTS.md`
- Include for each change:
  - **Problem**: Clear description of the issue being solved
  - **Root Cause**: Why the problem existed (if applicable)
  - **Solution**: What was changed and how it works
  - **Result**: Impact and improvement achieved
  - **Files Modified**: List of affected files and commit references
- Update existing entries if iterating on a fix (show evolution of solution)
- Summaries help future maintainers understand the "why" behind changes

### Auto-Generated API Files (CRITICAL - DO NOT EDIT)

- **NEVER manually edit files in `/src/api` that are auto-generated by Orval**
- These files are generated from the backend OpenAPI specification using `yarn generate-api`
- Any manual edits will be **completely overwritten** on next generation

**DO NOT EDIT (auto-generated by Orval):**

- `src/api/schemas/*` - All TypeScript schema/type files
- `src/api/articles/articles.ts` - Articles API endpoints
- `src/api/communities/communities.ts` - Communities API endpoints
- `src/api/discussions/discussions.ts` - Discussions API endpoints
- `src/api/reviews/reviews.ts` - Reviews API endpoints
- `src/api/posts/posts.ts` - Posts API endpoints
- `src/api/users/users.ts` - Users API endpoints
- `src/api/users-auth/users-auth.ts` - Auth API endpoints
- `src/api/users-common-api/users-common-api.ts` - Common user APIs
- `src/api/community-articles/community-articles.ts` - Community articles APIs
- `src/api/community-invitations/community-invitations.ts` - Invitations APIs
- `src/api/community-members/community-members.ts` - Members APIs
- `src/api/join-community/join-community.ts` - Join APIs
- `src/api/real-time/real-time.ts` - Real-time APIs
- `src/api/generated.ts` - Main generated exports file

**OK TO EDIT (manually maintained):**

- `src/api/custom-instance.ts` - Custom Axios instance with interceptors
- `src/api/ReactQueryClientProvider.tsx` - React Query provider setup
- `src/api/queryClientRegistry.ts` - Query client registry

**If API changes are needed:**

1. Update the backend OpenAPI specification (backend team responsibility)
2. Backend team runs their API generation
3. Frontend runs `yarn generate-api` to regenerate types from updated spec
4. **Never manually edit the generated files**

**Past mistakes to avoid:**

- Commit `d09e906` manually edited 13 auto-generated API files to improve TypeScript types
- These changes will be lost on next `yarn generate-api` run
- Proper fix: Update Orval config or accept generated types as-is
